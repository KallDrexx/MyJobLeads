@model MyJobLeads.ViewModels.PerformedSearchViewModel

@{
    ViewBag.Title = "Search Results";
}

<div class="grid2 floatLeft">
    <div class="taskHeader">
        <h3>Search Results</h3>
    </div>

    <h3 class="taskCalls">Companies</h3>

    <div id="taskRole">
        <ul>
            @if (Model.Results.Companies.Count == 0)
            {
                <li>
                    <div class="taskName">No companies matched the search terms</div>
                </li>
            }

            @foreach (var company in Model.Results.Companies)
            {
                <li>
                    <a href="@Url.Action(MVC.Company.Details(company.Id))">
                        <div class="taskName">@company.Name</div>
                        <div class="taskDescription">@Html.ShortString(company.Notes, 90)</div>
                    </a>
                </li>
            }
        </ul>
    </div>

    <h3 class="taskCalls">Contacts</h3>

    <div id="taskRole">
        <ul>
            @if (Model.Results.Contacts.Count == 0)
            {
                <li>
                    <div class="taskName">No contacts matched the search terms</div>
                </li>
            }

            @foreach (var contact in Model.Results.Contacts )
            {
                <li>
                    <a href="@Url.Action(MVC.Contact.Details(contact.Id))">
                        <div class="taskName">@contact.Name</div>
                        <div class="taskDescription">Employee of @contact.Company.Name</div>
                        <div class="taskDescription">@Html.ShortString(contact.Notes, 90)</div>
                    </a>
                </li>
            }
        </ul>
    </div>

    <h3 class="taskCalls">Tasks</h3>

    <div id="taskRole">
        <ul>
            @if (Model.Results.Contacts.Count == 0)
            {
                <li>
                    <div class="taskName">No tasks matched the search terms</div>
                </li>
            }

            @foreach (var task in Model.Results.Tasks)
            {
                <li>
                    <a href="@Url.Action(MVC.Task.Details(task.Id))">
                        <div class="taskName">@task.Name</div>
                        <div class="taskDescription">Company: @task.Company.Name</div>

                        @if (task.Contact != null)
                        {
                            <div class="taskDescription">Contact: @task.Contact.Name</div>
                        }

                        <div class="taskDescription">@Html.ShortString(task.Notes, 90)</div>
                    </a>
                </li>
            }
        </ul>
    </div>
</div>