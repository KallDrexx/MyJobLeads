@model IList<MyJobLeads.DomainModel.Entities.Task>

<div id="taskRole">
    <ul>
        @foreach (var task in Model)
        {
            string dueDate, taskDescription;
            
            // Create the task due date string
            dueDate = string.Empty;
            if (task.TaskDate != null)
            {
                if (task.TaskDate.Value.Date == DateTime.Today)
                {
                    dueDate = "Due Today";
                }
                else if (task.TaskDate.Value.Date == DateTime.Today.Subtract(new TimeSpan(1, 0, 0, 0)))
                {
                    dueDate = "Due Yesterday";
                }
                else if (task.TaskDate.Value.Date == DateTime.Today.Add(new TimeSpan(1, 0, 0, 0)))
                {
                    dueDate = "Due Tomorrow";
                }
                else
                {
                    dueDate = task.TaskDate.Value.ToShortDateString();
                }
            }
                 
            // Create the description string
            if (task.Contact == null)
            {
                taskDescription = task.Company.Name;
            }
            else
            {
                taskDescription = string.Format("{0} -- {1}", task.Contact.Name, task.Company.Name);
            }
            
            <li>
                <a href="@Url.Action(MVC.Task.Details(task.Id))">
                    <div class="greyHighlight date">@dueDate</div>
                    <div class="taskName">@task.Name</div>
                    <div class="taskDescription">@taskDescription</div>
                </a>
            </li>
        }
    </ul>
</div>