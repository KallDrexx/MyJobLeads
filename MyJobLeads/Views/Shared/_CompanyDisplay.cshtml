@model Company
@using MyJobLeads.DomainModel.Entities; 

@{
    string contactString = Model.Contacts.Count == 1 ? "contact" : "contacts";
    string taskString = Model.Tasks.Count == 1 ? "task" : "tasks";
}

<h2>@Model.Name</h2>
@Html.ActionLink("Edit", MVC.Company.Edit(Model.Id)) &nbsp; &nbsp; 
@Html.ActionLink("Back To Job Search", MVC.JobSearch.Details(Model.JobSearch.Id))
<br /><br />

Phone: @Model.Phone <br />
City: @Model.City <br />
State: @Model.State <br />
Zip: @Model.Zip <br />
Notes: @Model.Notes <br />

<br />

<h2>Contacts</h2>
This company has @Model.Contacts.Count @contactString entered (@Html.ActionLink("Add Contact", MVC.Contact.Add(Model.Id)))

<ul>
    @foreach (Contact contact in Model.Contacts.OrderBy(x => x.Name).ToArray())
    {
        <li>@Html.ActionLink(contact.Name, MVC.Contact.Details(contact.Id))</li>   
    }
</ul>

<h2>Tasks</h2>
This company has @Model.Tasks.Count @taskString entered (@Html.ActionLink("Add Task", MVC.Task.Add(Model.Id)))

<ul>
    @foreach (Task task in Model.Tasks)
    {
        <li>
            @Html.ActionLink(task.Name, MVC.Task.Details(task.Id)) - 

            @if (task.Completed) { <text>Completed </text> }
            else { <b>Not Completed</b> }

            @if (task.TaskDate != null && !task.Completed) { <text> - Due: @task.TaskDate.Value.ToString()</text> }
        </li>
    }
</ul>

